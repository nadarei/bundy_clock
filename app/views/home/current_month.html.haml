#current_month

  %p#date= @month

  - @dates.each do |date|

    %h3
      = date

    %table 

      - @users.each do |user|
        
        - time_log = user.time_logs.find_by_date(date)
        - next unless time_log

        %tr{data: { employee: user.name } }
          
          %td.user= user.name
          %td.in

            - if user == current_user
              - if user.timed_in?(date)
                %a.time{data: { timelogid: time_log.id }, href: "#"}
                  = short_time time_log.in
              - else
                = form_tag(time_in_path, method: :post) do
                  = button_tag "Time In"
  
            - else
              - if user.timed_in?(date)
                = short_time time_log.in
  
              - else
                not in 
  
          %td.out
  
            - if user == current_user
              - if user.timed_out?(date)
                %a.time{href: "#"}
                  = short_time time_log.out
  
              - elsif user.must_time_out?(date)
                = form_tag(time_out_path, method: :put) do
                  = button_tag "Time Out"
  
            - else
              - if user.timed_out?(date)
                = short_time time_log.out
  
